/*
 * customMudule v0.0.0
 * (c) 2016 Chuune
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n():"function"==typeof define&&define.amd?define(n):n()}(this,function(){"use strict";function e(e){if(l)e(l);else{var n=new XMLHttpRequest;n.open("GET","/content.json",!0),n.onload=function(){if(this.status>=200&&this.status<300){var n=JSON.parse(this.response||this.responseText);l=n instanceof Array?n:n.posts,e(l)}else console.error(this.statusText)},n.onerror=function(){console.error(this.statusText)},n.send()}}function n(e,n){return t(e.title,n)||t(e.text,n)}function t(e,n){return n.lastIndex=0,n.test(e)}function o(e){u.innerHTML="",e.forEach(function(e){var n=document.createElement("li");n.innerHTML='<a href="/'+e.path+'">'+e.title+"</a>",u.append(n)})}function i(t){""!==t?!function(){var i=new RegExp(t.replace(/[ ]/g,"|"),"gmi");e(function(e){var t=e.filter(function(e){return n(e,i)});c.style.display="block",o(t)})}():(o([]),c.style.display="none")}function a(e,n){e.on("click",n),e.on("touch",n)}var r=function(e,n,t,o){return!e.addEventListener&&(n="on"+n),(e.addEventListener||e.attachEvent).call(e,n,t,o),t},s=document.getElementById("header-search-input"),c=document.getElementById("header-search-box"),u=c.children[0],l=void 0;s.addEventListener("input",function(e){e.preventDefault(),e.stopPropagation(),i(s.value)});var f=document.getElementById("header-lang-select");r(f,"change",function(e){e.preventDefault();var n=e.target.querySelector('[value="'+e.target.value+'"]');location.href=n.dataset.href});var d=window.$,v=d("body"),h=!1,p=200,m=function(){h=!0},g=function(){setTimeout(function(){h=!1},p)},y=d("#mobile-nav");d("#main-nav-toggle").on("click",function(){h||(m(),v.toggleClass("mobile-nav-on"),y.show(),g())}),a(v,function(){!h&&v.hasClass("mobile-nav-on")&&(v.removeClass("mobile-nav-on"),y.hide())})});