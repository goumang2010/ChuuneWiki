<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>mySQL | Chuune Wiki</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="//cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-shim.min.js"></script>
  <script src="//apps.bdimg.com/libs/html5shiv/3.7/html5shiv.min.js"></script>
  <link rel="shortcut icon" type="image/png" href="favicon.png"/>
  <link rel="stylesheet" href="/css/index.css">
</head>

  <body>
  <header class="header-page">
    <div class="header-content">
      <a id="main-nav-toggle" class="nav-icon"></a>
      <h1 class="header-logo">
        <a class="no-style header-link" href="
        
          /zh-cn
        
        ">Chuune Wiki</a>
      </h1>
      <div class="menu">
        <a class="no-style header-link" href="/zh-cn/archives">索引</a>
        <a class="no-style header-link" target="_blank" href="https://github.com/goumang2010/hexo-wiki/edit/master/source/_posts/zh-cn/mySQL.md">编辑</a>
        <a class="no-style header-link" href="/readme">README</a>
        <a class="no-style header-link" target="_blank" href="https://github.com/goumang2010/hexo-wiki">GitHub</a>
      </div>
      <div id="header-search-div" class="header-search-div">
        <input id="header-search-input" class="header-search-input" type="text" placeholder="搜索"/>
        <div id="header-search-box" class="header-search-box"><ul id="header-search-list"></ul></div>
      </div>
      <div class="header-lang-select-wrap header-link menu">
        <label>
        
          简体中文
        
        </label>
        <select id="header-lang-select" class="header-lang-select">
        
          
            <option
              value=""
              selected
            >
              简体中文
            </option>
          
            <option
              value=""
              
            >
              English
            </option>
          
        
        </select>
      </div>
    </div>
 <nav id="mobile-nav">
    <a class="no-style header-link" href="
    
      /zh-cn
    
    ">首页</a>
	<a href="/zh-cn/archives">索引</a>
	<a target="_blank" href="https://github.com/goumang2010/hexo-wiki/edit/master/source/_posts/zh-cn/mySQL.md">编辑</a>
	<a href="/readme">README</a>
	<a target="_blank" href="https://github.com/goumang2010/hexo-wiki">GitHub</a>
</nav>
</header>

  <section class="container">
  <h2>mySQL</h2>
  mySQL
  <article class="markdown-body article">
  <div class="toc"><ul><li class="level-1"><a href="#1."><span class="tocnumber">1.</span>&nbsp<span class="toctext">安装</span></a></li><li class="level-1"><a href="#2."><span class="tocnumber">2.</span>&nbsp<span class="toctext">命令</span></a><ul><li class="level-2"><a href="#2.1."><span class="tocnumber">2.1.</span>&nbsp<span class="toctext">解锁</span></a></li><li class="level-2"><a href="#2.2."><span class="tocnumber">2.2.</span>&nbsp<span class="toctext">引擎</span></a></li></ul></li><li class="level-1"><a href="#3."><span class="tocnumber">3.</span>&nbsp<span class="toctext">表批量操作</span></a></li><li class="level-1"><a href="#4."><span class="tocnumber">4.</span>&nbsp<span class="toctext">配置优化</span></a><ul><li class="level-2"><a href="#4.1."><span class="tocnumber">4.1.</span>&nbsp<span class="toctext">文件结构</span></a></li><li class="level-2"><a href="#4.2."><span class="tocnumber">4.2.</span>&nbsp<span class="toctext">文件优化</span></a></li></ul></li><li class="level-1"><a href="#5."><span class="tocnumber">5.</span>&nbsp<span class="toctext">参考</span></a></li></ul></div><h1 id="1."><a href="#1." class="headerlink" title="安装"></a>1. 安装</h1><pre><code class="hljs ">apt-get <span class="hljs-keyword">install</span> mysql-<span class="hljs-keyword">server</span></code></pre><h1 id="2."><a href="#2." class="headerlink" title="命令"></a>2. 命令</h1><p>重启：</p>
<pre><code class="hljs "><span class="hljs-regexp">/etc/i</span>nit.d<span class="hljs-regexp">/mysql restart</span></code></pre><h2 id="2.1."><a href="#2.1." class="headerlink" title="解锁"></a>2.1. 解锁</h2><ul>
<li>查看所有进程： <pre><code class="hljs "><span class="hljs-keyword">show</span> <span class="hljs-keyword">full</span> <span class="hljs-keyword">processlist</span>;</code></pre></li>
<li>kill 进程id;</li>
</ul>
<h2 id="2.2."><a href="#2.2." class="headerlink" title="引擎"></a>2.2. 引擎</h2><p>查看系统支持的存储引擎:</p>
<pre><code class="hljs "><span class="hljs-keyword">show</span> <span class="hljs-keyword">engines</span>;</code></pre><p>查看默认引擎：</p>
<pre><code class="hljs "><span class="hljs-keyword">show</span> <span class="hljs-keyword">variables</span> <span class="hljs-keyword">like</span> <span class="hljs-string">'%storage_engine%'</span>;</code></pre><p>查看单个表引擎：</p>
<pre><code class="hljs "><span class="hljs-keyword">show</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">status</span> <span class="hljs-keyword">from</span> db_name <span class="hljs-keyword">where</span> <span class="hljs-keyword">name</span>=<span class="hljs-string">'table_name'</span>;</code></pre><p>查看数据库中所有表引擎：</p>
<pre><code class="hljs "><span class="hljs-keyword">select</span> table_name,<span class="hljs-keyword">ENGINE</span> <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">WHERE</span> table_schema = <span class="hljs-string">'dbname'</span></code></pre><p>修改引擎：ALTER TABLE my_table ENGINE=InnoDB;</p>
<h1 id="3."><a href="#3." class="headerlink" title="表批量操作"></a>3. 表批量操作</h1><pre><code class="hljs "><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">WHERE</span> table_schema = <span class="hljs-string">'dbname'</span></code></pre><h1 id="4."><a href="#4." class="headerlink" title="配置优化"></a>4. 配置优化</h1><h2 id="4.1."><a href="#4.1." class="headerlink" title="文件结构"></a>4.1. 文件结构</h2><p>数据文件默认存放于：/var/lib/mysql/</p>
<p>配置文件： /etc/mysql/my.cnf</p>
<h2 id="4.2."><a href="#4.2." class="headerlink" title="文件优化"></a>4.2. 文件优化</h2><p>若要在其他主机上进行远程登陆mysql，需在my.cnf中添加：</p>
<pre><code class="hljs "><span class="hljs-section">[mysqld]</span>
<span class="hljs-attr">bind-address</span>=<span class="hljs-string">"0.0.0.0"</span></code></pre><p>注意双引号<br>设置utf8默认字符,在mysqld后：</p>
<pre><code class="hljs "><span class="hljs-attr">character_set_server</span>=utf8 
<span class="hljs-attr">init_connect</span>=<span class="hljs-string">'SET NAMES utf8'</span></code></pre><p>Mysql5.5配置文件如下：</p>
<pre><code class="hljs "><span class="hljs-comment">#</span>
- !includedir /etc/mysql/conf.d/
- !includedir /etc/mysql/mysql.conf.d/
[mysqld]
<span class="hljs-attr">bind-address="0.0.0.0"</span>
<span class="hljs-attr">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span>
<span class="hljs-attr">back_log</span> = <span class="hljs-number">600</span>
<span class="hljs-attr">max_connections</span> = <span class="hljs-number">1000</span>
<span class="hljs-attr">max_connect_errors</span> = <span class="hljs-number">6000</span>
<span class="hljs-attr">open_files_limit</span> = <span class="hljs-number">65535</span>
<span class="hljs-attr">table_open_cache</span> = <span class="hljs-number">128</span>
<span class="hljs-attr">max_allowed_packet</span> = <span class="hljs-number">4</span>M
<span class="hljs-attr">binlog_cache_size</span> = <span class="hljs-number">1</span>M
<span class="hljs-attr">max_heap_table_size</span> = <span class="hljs-number">8</span>M
<span class="hljs-attr">tmp_table_size</span> = <span class="hljs-number">16</span>M
<span class="hljs-attr">read_buffer_size</span> = <span class="hljs-number">2</span>M
<span class="hljs-attr">read_rnd_buffer_size</span> = <span class="hljs-number">8</span>M
<span class="hljs-attr">sort_buffer_size</span> = <span class="hljs-number">8</span>M
<span class="hljs-attr">join_buffer_size</span> = <span class="hljs-number">8</span>M
<span class="hljs-attr">thread_cache_size</span> = <span class="hljs-number">6</span>
<span class="hljs-attr">query_cache_size</span> = <span class="hljs-number">8</span>M
<span class="hljs-attr">query_cache_limit</span> = <span class="hljs-number">2</span>M
<span class="hljs-attr">key_buffer_size</span> = <span class="hljs-number">4</span>M
<span class="hljs-attr">ft_min_word_len</span> = <span class="hljs-number">4</span>
- 分词词汇最小长度，默认<span class="hljs-number">4</span>
<span class="hljs-attr">log_bin</span> = mysql-bin
<span class="hljs-attr">binlog_format</span> = mixed
<span class="hljs-attr">expire_logs_days</span> = <span class="hljs-number">30</span> <span class="hljs-comment">#超过30天的binlog删除</span>
<span class="hljs-attr">slow_query_log</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">bulk_insert_buffer_size</span> = <span class="hljs-number">8</span>M
<span class="hljs-attr">myisam_max_sort_file_size</span> = <span class="hljs-number">10</span>G
<span class="hljs-attr">myisam_repair_threads</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">interactive_timeout</span> = <span class="hljs-number">18800</span>
<span class="hljs-attr">wait_timeout</span> = <span class="hljs-number">18800</span>
<span class="hljs-attr">character_set_server=utf8</span> 
<span class="hljs-attr">init_connect='SET</span> NAMES utf8'
<span class="hljs-attr">default-storage-engine</span> = InnoDB
<span class="hljs-attr">innodb_lock_wait_timeout</span> = <span class="hljs-number">120</span>
<span class="hljs-attr">innodb_max_dirty_pages_pct</span> = <span class="hljs-number">90</span>
<span class="hljs-attr">innodb_flush_log_at_trx_commit</span> = <span class="hljs-number">2</span>
<span class="hljs-attr">innodb_purge_threads</span> = <span class="hljs-number">1</span>
[mysql]
<span class="hljs-attr">default_character_set=utf8</span>
[client]
<span class="hljs-attr">port</span> = <span class="hljs-number">3306</span></code></pre><h1 id="5."><a href="#5." class="headerlink" title="参考"></a>5. 参考</h1><p><a href="https://blog.linuxeye.com/379.html" target="_blank" rel="external">https://blog.linuxeye.com/379.html</a></p>
<p><a href="http://www.jb51.net/article/33569.htm" target="_blank" rel="external">http://www.jb51.net/article/33569.htm</a></p>
 
</section>

  <section class="footer">
  <div class="container">
    <span class="footer-item">Text is available under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></span>
    <span class="footer-item">Created by <a href="null">ZN</a></span>
    <span class="footer-item">Powered by <a href="https://hexo.io">Hexo</a></span>
    <span class="footer-item">Themed by <a href="https://github.com/xcatliu/hexo-theme-wiki-i18n">wiki-i18n</a></span>
    <span class="footer-item">Hosted by <a href="https://pages.github.com/">GitHub Pages</a></span>
  </div>
</section>

  <script>
  window.HEXO_DATA = {
    config: {"title":"Chuune Wiki","subtitle":"Write something","description":null,"author":"ZN","language":["zh-cn","en","default"],"timezone":null,"url":"http://yoursite.com","root":"/","permalink":":category/:title.html","permalink_defaults":null,"source_dir":"source","public_dir":"public","tag_dir":"tags","archive_dir":"archives","category_dir":"categories","code_dir":"downloads/code","i18n_dir":":lang","skip_render":null,"new_post_name":":lang/:title.md","default_layout":"post","titlecase":false,"external_link":true,"filename_case":0,"render_drafts":false,"post_asset_folder":false,"relative_link":false,"future":true,"highlight":{"enable":false,"auto_detect":true,"line_number":false,"tab_replace":null},"default_category":"uncategorized","category_map":null,"tag_map":null,"date_format":"YYYY-MM-DD","time_format":"HH:mm:ss","per_page":1000,"pagination_dir":"page","theme":"wiki-i18n","deploy":{"type":"git","repo":"git@github.com:goumang2010/hexo-wiki.git","branch":"gh-pages","message":null},"author_link":null,"github":"https://github.com/goumang2010/hexo-wiki","index_generator":{"per_page":10,"order_by":"-date"},"marked":{"gfm":true,"pedantic":false,"sanitize":false,"tables":true,"breaks":true,"smartLists":true,"smartypants":true},"jsonContent":{"meta":false,"pages":true,"posts":{"title":true,"date":true,"path":true,"text":true,"raw":false,"content":false,"slug":false,"updated":false,"comments":false,"link":false,"permalink":false,"excerpt":true,"categories":false,"tags":false}},"archive_generator":{"per_page":1000,"yearly":true,"monthly":true,"daily":false},"category_generator":{"per_page":1000},"tag_generator":{"per_page":1000},"server":{"port":4000,"log":false,"ip":"0.0.0.0","compress":false,"header":true}},
  };
</script>

  <script src="/js/dist/custom.min.js?v=28400858821"> </script>


  </body>
</html>
